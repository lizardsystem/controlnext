<!DOCTYPE html>
<html lang="en">
<head>
<title>ControlNext Dashboard</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- pace must loads as early as possible -->
<link href="{{ STATIC_URL }}controlnext/styles/pace.css" rel="stylesheet">
<script src="{{ STATIC_URL }}controlnext/lib/pace-0.4.15/pace.min.js"></script>
<link href="{{ STATIC_URL }}controlnext/lib/bootstrap-3.0.0/dist/css/bootstrap.min.css"
      rel="stylesheet">
<link href="{{ STATIC_URL }}controlnext/lib/font-awesome-4.0.3/css/font-awesome.min.css"
      rel="stylesheet">
<link href="{{ STATIC_URL }}controlnext/styles/dashboard.css" rel="stylesheet">
<link href="{{ STATIC_URL }}controlnext/widgets/css/quadrant.css" rel="stylesheet"></link>
<link href="{{ STATIC_URL }}controlnext/widgets/css/actuelewaterstand.css" rel="stylesheet"></link>
<link href="{{ STATIC_URL }}controlnext/widgets/css/reverseosmose.css" rel="stylesheet"></link>
</head>
<body>
<div class="dashboard-container">
    <div class="row">
        <div class="col-sm-3 left-col">
            <div class="row left-col-row-1">
                <div class="col-sm-12">
		  <div class="box-top-info"> 
		  <table width="100%">
		    <tr>
		      <td>
			<h4>Dashboard DIG</h4>
		      </td>
		      <td  rowspan="2">
			  {% if view.basin.owner.image %}
		            <img id="situation-image" src="{{ view.basin.owner.image.url }}" width="80" height="86" align="right" />
			  {% elif view.crop_type %}
		             <img id="situation-image" src="{{ STATIC_URL }}controlnext/{{ view.crop_type }}.jpg" width="80" height="86" align="right" />
	                  {% else %}
                             <img id="situation-image" src="{{ STATIC_URL }}controlnext/situation.jpg" width="80" height="86" align="right" />
                          {% endif %}
		      </td>
		    </tr>
		    <tr>
		      <td valign="bottom">
			<h5 data-bind="text: moment().format('D MMMM YYYY') + ' (week: ' +  currentweek + ')'" />
		      </td>
		    </tr>
		 </table>
               </div>
             </div>
            </div>
            <div class="row left-col-row-2">
                <div class="col-sm-12">
                    <div class="box-basin-data">
			<table class="basin-data-detail-table">
                          <tr><td><b>Locatie</b><br>{{ view.basin }}</td></tr>
                          <tr><td><b>Teelt</b><br>{{ view.crop_type }}</td></tr>
			  
                        </table>

                        <table class="basin-data-detail-table-2">
			  <tr><td>
			      <b>Watervraag</b><br><span data-bind="text: currentDemand"></span><span> l/m<sup>2</sup>/etmaal
			      <div class="popover-markup"> <a href="#" class="trigger">Bewerken</a> 
				<div class="head hide">Bewerken</div>
				<div class="content hide">
				  <div class="form-group form-group-demand">
				    {% for i in view.demand_table %}
				    {% ifequal i.w view.current_week %}
				      <label class="label label-default label-current-week">week {{ i.w }}</label>
				      <input type="text" class="form-control" autofocus value={{i.v}}>
				    {% else %}
				      <label class="label label-default">week {{ i.w }}</label>
				      <input type="text" class="form-control" value={{i.v}}>
				    {% endifequal %}
				    
				    {% endfor%}
				  </div>
				  <button type="submit" class="btn btn-default btn-block">Opslaan</button>
				</div>
				<div class="footer hide">test</div>
			      </div>
			      </td>
			  </tr>
			  <tr><td><b>Teeltareaal</b><br><input class="small-input" size="7" data-bind="value: rainFloodSurface"><span> m<sup>2</sup></span></td></tr>
			  <tr><td><b>Capasiteit bassin</b><br><input class="small-input" size="7" data-bind="value: basinMaxStorage"><span> m<sup>3</sup></span></td></tr>
                          <tr><td><b>Capaciteit omgekeerde osmose</b><br><input class="small-input" size="7" data-bind="value: osmoseCapacity"><span> m<sup>3</sup>/uur</span></td></tr>
                          <tr><td><b>Aflaat capaciteit</b><br><input class="small-input" size="7" data-bind="value: outflowCapacity"><span> m<sup>3</sup>/uur</span></td></tr>
                          <tr><td><b>Datum</b><br><span class="label label-default" data-bind="text: currentDate().format('LLL')">&ndash;</span></td></tr>
                          <tr><td><b>Aflaat open</b><br><span class="label label-default" data-bind="text: outflowOpened().format('LLL')">&ndash;</span></td></tr>
                          <tr><td><b>Aflaat dicht</b><br><span class="label label-default" data-bind="text: outflowClosed().format('LLL')">&ndash;</span></td></tr>
                        </table>
                        <table class="basin-data-detail-table-3">
                	  <tr><td><b><span>Verwachte overstort 24 uur</span></b><br><span class="textual-value" id="overflow-24h-value"></span></td></tr>
                	  <tr><td><b><span>Verwachte overstort 5 dagen</span></b><br><span class="textual-value" id="overflow-5d-value"></span></td></tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="row left-col-row-3">
                <div class="col-sm-12">
                    <div class="box-weather-forecast">
                        <h5><span class="bold">Weersvoorspelling</span> | Weer Maasdijk</h5>
                        <div style="height: 220px;overflow: hidden;">
                        <div style="height: 220px;">
                        <iframe id="widget-frame" src="http://www.weeronline.nl/Go/ExternalWidgetsNew/ThreeDaysCity?gid=4058013&sizeType=1&temperatureScale=Celsius&defaultSettings=False" width="100%" height="216" frameborder="0" scrolling="no" style="border: none;" allowtransparency="true"></iframe>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-8 right-col">
<!--
            <div class="row right-col-row-4">
                <div class="col-sm-10">
                    <div class="box-timespan">
                        <div id="timespan-selector"></div>
                    </div>
                </div>
                <div class="col-sm-2"></div>
            </div>
-->
            <div class="row right-col-row-1">
                <div class="col-sm-9">
                    <div class="box-demand-chart">
                        <div id="demand-chart"></div>
                        <!-- <span class="info-popup" data-content="uitleg" style="width: 20px; height: 20px; line-height: 20px; left: 73px; top: 8px;"><i class="fa fa-info"></i></span> -->
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="box-empty"></div>
                </div>
            </div>
            <div class="row right-col-row-2">
                <div class="col-sm-9">
                    <div class="box-precipitation-chart">
                        <div id="precipitation-chart"></div>
                        <!-- <span class="info-popup" data-content="uitleg" style="width: 20px; height: 20px; line-height: 20px; left: 73px; top: 0px;"><i class="fa fa-info"></i></span>-->
                    </div>
                </div>
                <div class="col-sm-3">
                    <div class="box-quadrant">
                        <div id="quadrant-control">
                            <div id="quadrant-label">Buien kwadrant<!--<span class="info-popup" data-content="uitleg" style="width: 20px; height: 20px; line-height: 20px; right: 0;"><i class="fa fa-info"></i></span>--></div>
                            <div id="quadrant-1"><div id="quadrant-camel" class="hide"></div></div>
                            <div id="quadrant-2"><div id="quadrant-dromedary" class="hide"></div></div>
                            <div id="quadrant-3"><div id="quadrant-squirrel" class="hide"></div></div>
                            <div id="quadrant-4"><div id="quadrant-guinea-pig" class="hide"></div></div>
                            <!--div id="quadrant-dot"></div-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="row right-col-row-3">
                <div class="col-sm-9">
                    <div class="box-fill-chart">
                        <div id="fill-chart"></div>
                        <!-- <span class="info-popup" data-content="uitleg" style="width: 20px; height: 20px; line-height: 20px; left: 73px; top: 8px;"><i class="fa fa-info"></i></span>-->
                    </div>
                </div>
                <div class="col-sm-2">
		  <div class="box-fill-gauge">
		    <!--span class="info-popup" data-content="uitleg" style="width: 20px; height: 20px; line-height: 20px; right: 0; top: 0px;">
			<i class="fa fa-info"></i>
		    </span-->
		    <div id="fill-gauge">	        
	              <div class="actual">
	              </div>
	              <div class="graphpattern">
		        <span class="label" id="label-actual-water">aantal mm beschikbaar</span>
	              </div>
	              <div class="actuallabel">
		        <span class="label-container">
		          <span class="label-name">Actueel</span>
			</span>	
			<span class="arrowleft"></span>
	        	<span class="arrowright"></span>		        	
	              </div>
		    </div>
		    <!--input id="actualcontrol" type="text" value="0" /-->
		    <div class="box-main-controls">
		      <button class="btn-calculate" data-bind="click: calculate">Bereken</button>
		      <button class="btn-restore" data-bind="click: reset">Herstel</button>
		    </div>
		  </div> 
                    <!--div class="box-fill-gauge">
                        <span class="info-popup" data-content="uitleg" style="width: 20px; height: 20px; line-height: 20px; right: 0; top: 0;"><i class="fa fa-info"></i></span>
                        <div id="fill-gauge"></div>
                    </div-->
		</div>
		<div class="col-sm-1">
		  <!--<span class="info-popup" data-content="uitleg" style="width: 20px; height: 20px; line-height: 20px; left: -40px; top: 0px;">
			<i class="fa fa-info"></i>-->
		</div>
            </div>
            <div class="row right-col-row-4">
                <div class="col-sm-4">
                    <div class="box-chart-selector">
                        <div class="btn-group">
                            <!--button type="button" class="btn btn-default btn-sm" data-bind="click: browseTimespan" data-direction="bwd">&laquo;</button-->
                            <button type="button" class="btn btn-default btn-sm" data-bind="click: selectTimespan" data-timespan="48">48 u</button>
                            <button type="button" class="btn btn-default btn-sm" data-bind="click: selectTimespan" data-timespan="96">4 dg</button>
                            <button type="button" class="btn btn-default btn-sm" data-bind="click: selectTimespan" data-timespan="672">4 wk</button>
                            <!--button type="button" class="btn btn-default btn-sm" data-bind="click: browseTimespan" data-direction="fwd">&raquo;</button-->
                            <!--<button type="button" class="btn btn-default btn-sm">%</button>
                            <button type="button" class="btn btn-default btn-sm">L/m<sup>2</sup></button>-->
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="box-empty"></div>
                </div>
                <div class="col-sm-2">
		  
                    <div class="box-empty"></div>
                </div>
            </div>
            <div class="row right-col-row-5">
                <div class="col-sm-9">
                    <div class="box-timespan-controls">
                        <div id="outflow-timespan-selector"></div>
                    </div>

            <!-- <div style="background:#1D60A7;position:relative;height:25px;margin-left:58px;"> -->
            <!--     <div style="padding-left:7px;width:130px;background:#C8D9E2;height:25px;left:0px;position:absolute;color:white;overflow:hidden;"> -->
            <!--     Reverse osmosis -->
            <!--     </div> -->
            <!-- </div> -->

                </div>
                <div class="col-sm-2">
                    <div class="box-timespan-controls-labels">
                        <div id="outflow-label">Aflaat<span class="info-popup" data-content="uitleg" style="width: 25px; height: 25px; line-height: 25px; right: 0;"><i class="fa fa-info"></i></span></div>
			<div class="box-main-controls">
                        <!--div><span class="info-popup" data-content="uitleg" style="width: 25px; height: 25px; line-height: 25px;"><i class="fa fa-info"></i></span></div-->
			</div>
                    </div>

                </div>
            
            <!-- <hr> -->
            <!-- <div class="col-sm-3"> -->
            <!-- <p><strong>Watervraag</strong> (per jaar)</p> -->
            <!-- <img src="{{ STATIC_URL }}controlnext/images/icon-calendar.png"><select><option>Kiezen</option></select> -->
            <!-- </div> -->

            <!-- <div class="col-sm-3"> -->
            <!-- <p><strong>RO aan</strong> (kies begindatum)</p> -->
            <!-- <img src="{{ STATIC_URL }}controlnext/images/icon-calendar.png"><select><option>Dag</option></select> -->
            <!-- <select><option>Maand</option></select> -->
            <!-- </div> -->

            <!-- <div class="col-sm-3"> -->
            <!-- <p><strong>RO ui</strong> (kies einddatum)</p> -->
            <!-- <img src="{{ STATIC_URL }}controlnext/images/icon-calendar.png"><select><option>Dag</option></select> -->
            <!-- <select><option>Maand</option></select> -->
            <!-- </div> -->
            <!-- <hr> -->

            </div>
            <div class="row right-col-row-6">
                <div class="col-sm-12">
                </div>
            </div>
        </div>
    </div>
</div>
<div id="data-constants"
     data-url-base="{{ STATIC_URL }}controlnext/"
     data-data-url="{% url controlnext-data-service view.basin.id %}"
     data-oppervlakte="{{ view.basin.owner.rain_flood_surface }}"
     data-max-voorraad="{{ view.basin.max_storage }}"
     style="display:none;">
</div>
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="static/lib/bootstrap-3.0.0/assets/js/html5shiv.js"></script>
  <script src="static/lib/bootstrap-3.0.0/assets/js/respond.min.js"></script>
<![endif]-->
<!--script src="{{ STATIC_URL }}controlnext/lib/jquery-1.9.1/jquery-1.9.1.min.js"></script-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
<script src="{{ STATIC_URL }}controlnext/lib/knockout-3.0.0/knockout-3.0.0.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.3.1/moment-with-langs.min.js"></script>
<script src="{{ STATIC_URL }}controlnext/lib/bootstrap-3.0.0/dist/js/bootstrap.min.js"></script>
<script src="{{ STATIC_URL }}controlnext/lib/globalize-0.1.1/globalize.js"></script>
<script src="{{ STATIC_URL }}controlnext/lib/globalize-0.1.1/cultures/globalize.culture.en-US.js"></script>
<script src="{{ STATIC_URL }}controlnext/lib/globalize-0.1.1/cultures/globalize.culture.nl-NL.js"></script>
<script type="text/javascript">
    // Force culture to Dutch.
    Globalize.culture('nl-NL');
    moment.lang('nl');
    var outflowcapacity = {{ view.basin.owner.max_outflow_per_timeunit|default:0 }};
    var osmosecapacity = {{ view.basin.owner.reverse_osmosis|default:0 }};
    var rainfloodsurface = {{ view.basin.owner.rain_flood_surface|default:0 }};
    var basinmaxstorage = {{ view.basin.max_storage|default:0 }};
    var currentdemand = {{ view.current_demand|default:0 }};
    var currentweek = moment.utc().isoWeeks();
</script>
<script src="{{ STATIC_URL }}controlnext/lib/ChartJS-13.1.8/dx.chartjs.debug.js"></script>
<script src="{{ STATIC_URL }}controlnext/widgets/js/actualwater.js"></script>
<script src="{{ STATIC_URL }}controlnext/widgets/js/quadrant.js"></script>
<!--script src="{{ STATIC_URL }}controlnext/widgets/js/reverseosmose.js"></script-->
<script src="{{ STATIC_URL }}controlnext/widgets/js/script.js"></script>
<script src="{{ STATIC_URL }}controlnext/scripts/dashboard.js"></script>
</body>
</html>
